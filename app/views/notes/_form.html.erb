<div class="modCopy module">
	<%= form_for(@note) do |f|%>
		<% if @note.errors.any? %>
			<ul>
				<%- @note.errors.full_messages.each do |msg| -%>
					<li><%=msg%></li>
				<%-end-%>
			</ul>
		<% end %>
		<fieldset>
			<p>
				<%= f.required_field_label :first_name, "First Name"%>
				<%= f.text_field :first_name %>
			</p>
			<p>
				<%= f.required_field_label :last_name, "Last Name"%>
				<%= f.text_field :last_name%>
			</p>
			<p>
				<%= f.required_field_label :city%>
				<%= f.text_field :city%>
			</p>
			<p class="phone">
				<label>Primary Phone Number</label>
				(<%=f.text_field :areaCode, {:class => "areaCode", :maxlength => "3"} %>)
				<%=f.text_field :prefix, {:class => "prefix", :maxlength => "3"}%>
				<%=f.text_field :line, {:class => "line", :maxlength => "4"}%>
				
				ext. <%=f.text_field :extension, {:class => "ext", :maxlength => "3"}%>
			</p>
			<p class="formFloat">
				<%= f.required_field_label :student_id, "Student ID"%>
				<%= f.text_field :student_id %>
			</p>
			<p>
				<%= f.label :counselor_id, "Guidance Counselor"%>
				<% counselor_array = ["Choose a Counselor"] + current_school.counselors.map { |counselor| [counselor.formal_name, counselor.id] } %>
				<%= f.select :counselor_id, options_for_select(counselor_array, @student.counselor_id) %>
			</p>
			<p>
				<%=f.label :shop%>
				<%=f.text_field :shop%>
			</p>
			<p>
				<%=f.label :year_of_graduation%>
				<%= f.text_field :year_of_graduation %>
			</p>
			<div class="button">
				<%=f.submit (request.filtered_parameters["action"] == "new" ||  request.filtered_parameters["action"] == "create")? "Add This Student" : "Update This Student"%>
			</div>
		</fieldset>
	<% end %>
</div><!--// end modCopy //-->



<%#= form_for(@note) do |f|
  - if @note.errors.any?
    #errorExplanation
      %h2= "#{pluralize(@note.errors.count, 'error')} prohibited this user from being saved:"
      %ul
      - @note.errors.full_messages.each do |msg|
        %li= msg
  =f.hidden_field :student_ids, :value => @student_id_string
  =f.hidden_field :group_ids, :value => @group_id_string
  .grid_2
    =f.label 'Category'
    %br
    -categories = current_school.categories.all.sort {|x,y| x.name <=> y.name}
    -default = current_school.categories.find_by_name('Uncategorized')
    -default = categories.first unless default
    = f.select :category_id, categories.map {|c| [c.name, c.id]}, :selected => default.id 
  .clear
  .grid_2
    =f.label :summary
  .clear
  .grid_3
    =f.text_field :summary
  .clear
  -if @student && @student.counselor != current_counselor
    .grid_3
      =f.check_box :notify_students_counselor
      =f.label :notify_students_counselor, "Notify student's counselor (" + @student.counselor.formal_name + ")"
  -if current_school.show_tags
    .grid_4
      =f.label :tags, 'Tags (separated by spaces)'
    .clear
    .grid_3
      =f.text_field :tags_string
    .clear
  
  .grid_1
    =f.label :notes
  .clear
  .grid_5
    =f.text_area :notes
  .clear
  .grid_1
    = f.submit 'Save Note'
  .clear
%>